<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#ff8c42">
<meta name="description" content="App para registrar horas de trabajo y descanso">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icons/icon-192.png">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<title>Regyster - Registro de Trabajo</title>
  <!-- Estilos modulares -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/forms.css">
  <link rel="stylesheet" href="css/cronometro.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/pages.css">
  <link rel="stylesheet" href="css/stickman.css">
</head>
<body>
</head>
<body>

<!-- ========== PÃGINA 1: INICIO ========== -->
<div class="pagina active" id="paginaInicio">
<div class="contenedor">

  <h2>âš”ï¸ Regyster âš”ï¸</h2>

  <div class="seccion">
    <label>ğŸ“… Fecha</label>
    <input type="date" id="fecha" />

    <label>ğŸŒ™ Horas Nocturnas (automÃ¡tico)</label>
    <div class="nocturnas-display" id="nocturnasDisplay">
      <span id="nocturnasValor">0h 0m 0s</span>
      <span class="nocturnas-info">(22:00 - 06:00)</span>
    </div>

    <label>ğŸ›ï¸ Dieta Pernocta</label>
    <select id="dieta_pernocta">
      <option value="casa">En casa</option>
      <option value="camion">En camiÃ³n</option>
    </select>

    <label class="checkbox-label">
      <input type="checkbox" id="festivo" /> ğŸ‰ Festivo
    </label>

    <label class="checkbox-label">
      <input type="checkbox" id="sexto" /> 6ï¸âƒ£ Sexto dÃ­a consecutivo
    </label>

    <div class="cronometro-container">
      <div class="reloj" id="reloj">
        <div class="icono-reloj" id="iconoReloj">ğŸ”§</div>
        <div class="tiempo-reloj" id="tiempoReloj">00:00:00</div>
      </div>
      <button id="botonCrono">â–¶ INICIAR TRABAJO</button>
    </div>
    <div class="estado-crono" id="estadoCrono">Presiona para comenzar</div>

    <button id="botonGuardar">ğŸ’¾ GUARDAR</button>
    <button id="botonBorrar">ğŸ—‘ï¸ BORRAR REGISTROS</button>
  </div>

  <div class="separador"></div>

  <!-- Historial oculto - datos siguen guardÃ¡ndose pero no se muestra -->
  <div style="display: none;">
    <h2>ğŸ“‹ Historial</h2>
    <div class="seccion">
      <div id="historial"></div>
    </div>
  </div>

  <div class="separador"></div>

  <h2 class="titulo-neon-led">RESÃšMENES</h2>

  <div class="seccion">
    <label>Resumen Normal (Mes Completo)</label>
    <input type="month" id="mesResumen" />
    <button id="resumenMes">ğŸ“ˆ Mostrar Resumen Mensual</button>
    <div id="resumen"></div>
  </div>

  <div class="seccion">
    <label>ğŸ“… Calendario 26â†’25 (Ciclo Laboral)</label>
    <input type="month" id="mesResumenReal" />
    <button id="resumenReal">ğŸ“… Mostrar Calendario 26â†’25</button>
    <div id="resumenRealResultado"></div>
  </div>

  <!-- Resumen Diario oculto - funcionalidad sigue disponible pero no se muestra en pantalla principal -->
  <div class="seccion" style="display: none;">
    <label>ğŸ“… Resumen Diario</label>
    <button id="btnMostrarDiarios">ğŸ“… Mostrar ResÃºmenes Diarios</button>
    <div id="listaDiasResumen"></div>
  </div>

</div>
</div>
<!-- FIN PÃGINA 1 -->

<!-- ========== PÃGINA 2: GRÃFICAS ========== -->
<div class="pagina" id="paginaGraficas">
<div class="graficas-container">
  
  <h2 class="titulo-neon">GRÃFICAS</h2>
  
  <div class="periodo-selector">
    <button class="periodo-btn active" data-periodo="semana">Semana</button>
    <button class="periodo-btn" data-periodo="mes">Mes</button>
    <button class="periodo-btn" data-periodo="anio">AÃ±o</button>
    <button class="periodo-btn" data-periodo="todo">Todo</button>
  </div>
  
  <div class="grafica-seccion">
    <div class="grafica-titulo">ğŸ”§ Horas de Trabajo</div>
    <div class="grafica-canvas-container">
      <canvas id="graficaTrabajo"></canvas>
    </div>
    <div class="grafica-stats" id="statsTrabajo">
      <div class="grafica-stat">
        <div class="grafica-stat-valor" id="totalHorasTrabajo">0</div>
        <div class="grafica-stat-label">Total Horas</div>
      </div>
      <div class="grafica-stat">
        <div class="grafica-stat-valor" id="promedioTrabajo">0</div>
        <div class="grafica-stat-label">Promedio/DÃ­a</div>
      </div>
      <div class="grafica-stat">
        <div class="grafica-stat-valor" id="diasTrabajados">0</div>
        <div class="grafica-stat-label">DÃ­as Trabajados</div>
      </div>
    </div>
  </div>
  
  <div class="grafica-seccion">
    <div class="grafica-titulo">ğŸ›ï¸ Horas de Descanso</div>
    <div class="grafica-canvas-container">
      <canvas id="graficaDescanso"></canvas>
    </div>
    <div class="grafica-stats" id="statsDescanso">
      <div class="grafica-stat">
        <div class="grafica-stat-valor" id="totalHorasDescanso">0</div>
        <div class="grafica-stat-label">Total Horas</div>
      </div>
      <div class="grafica-stat">
        <div class="grafica-stat-valor" id="promedioDescanso">0</div>
        <div class="grafica-stat-label">Promedio/DÃ­a</div>
      </div>
      <div class="grafica-stat">
        <div class="grafica-stat-valor" id="diasDescanso">0</div>
        <div class="grafica-stat-label">DÃ­as Descanso</div>
      </div>
    </div>
  </div>

</div>
</div>
<!-- FIN PÃGINA 2 -->

<!-- ========== PÃGINA 3: PRÃ“XIMAMENTE ========== -->
<div class="pagina" id="paginaProximamente">
<div class="proximamente-container">
  
  <div class="proximamente-icono">ğŸ”®</div>
  
  <div class="proximamente-titulo">PrÃ³ximamente...</div>
  
  <div class="proximamente-mensaje">
    Esta pÃ¡gina estÃ¡ reservada para futuras funcionalidades Ã©picas que aÃºn no se me han ocurrido.
    <br><br>
    Cuando la inspiraciÃ³n golpee como un rayo en mitad de la noche (o en un descanso del camiÃ³n), 
    aquÃ­ aparecerÃ¡ algo increÃ­ble.
    <span class="sarcastico">
      "De momento, disfruta del vacÃ­o existencial de esta pÃ¡gina. 
      Es minimalismo llevado al extremo. Muy zen. Muy moderno. 
      BÃ¡sicamente, no hay nada porque aÃºn no me ha dado por aÃ±adir nada. 
      Pero hey, Â¡el icono flota! Eso cuenta como feature, Â¿no?" ğŸ­
    </span>
  </div>

</div>
</div>
<!-- FIN PÃGINA 3 -->

<!-- ========== PÃGINA 4: AJUSTES ========== -->
<div class="pagina" id="paginaAjustes">
<div class="ajustes-container">
  
  <h2>âš™ï¸ Ajustes</h2>
  
  <!-- PersonalizaciÃ³n -->
  <div class="ajuste-seccion">
    <div class="ajuste-seccion-titulo">ğŸ¨ PersonalizaciÃ³n</div>
    
    <div class="ajuste-toggle-container">
      <span class="ajuste-toggle-label">ğŸŒ™ Modo Oscuro / â˜€ï¸ Claro</span>
      <div class="toggle-switch" id="toggleModoClaro" onclick="toggleModoClaro()">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
    <div class="ajuste-toggle-container">
      <span class="ajuste-toggle-label">âœ¨ Efectos NeÃ³n</span>
      <div class="toggle-switch activo" id="toggleNeon" onclick="toggleNeon()">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">âš¡ Velocidad Animaciones</label>
      <select class="ajuste-select" id="velocidadAnimaciones" onchange="cambiarVelocidadAnimaciones()">
        <option value="normales">Normales</option>
        <option value="rapidas">RÃ¡pidas</option>
        <option value="lentas">Lentas</option>
        <option value="off">Desactivadas</option>
      </select>
    </div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">ğŸ• Formato de Horas</label>
      <select class="ajuste-select" id="formatoHoras" onchange="cambiarFormatoHoras()">
        <option value="tradicional">Tradicional (8h 30m 15s)</option>
        <option value="decimal">Decimal (8.50h)</option>
      </select>
    </div>
    
    <div class="separador" style="margin: 20px 0; opacity: 0.3;"></div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">Color principal</label>
      <div class="ajuste-color-preview">
        <input type="color" id="colorPrincipal" value="#ff8c42">
        <span id="colorPrincipalHex">#ff8c42</span>
      </div>
    </div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">TamaÃ±o de texto</label>
      <div class="ajuste-range-container">
        <input type="range" class="ajuste-range" id="tamanoTexto" min="12" max="20" value="16">
        <span class="ajuste-range-valor" id="tamanoTextoValor">16px</span>
      </div>
    </div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">Fuente</label>
      <select class="ajuste-select" id="fuenteTexto">
        <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI (Por defecto)</option>
        <option value="'Arial', sans-serif">Arial</option>
        <option value="'Roboto', sans-serif">Roboto</option>
        <option value="'Courier New', monospace">Courier New (Monospace)</option>
        <option value="'Georgia', serif">Georgia (Serif)</option>
      </select>
    </div>
    
    <button class="btn-ajuste" onclick="aplicarPersonalizacion()">âœ¨ Aplicar Cambios</button>
    <button class="btn-ajuste" onclick="resetearPersonalizacion()" style="background: rgba(255,140,66,0.2); color: #ff8c42; margin-top: 8px;">ğŸ”„ Restaurar Predeterminados</button>
  </div>
  
  <!-- ConfiguraciÃ³n de Horarios y Ciclos -->
  <div class="ajuste-seccion">
    <div class="ajuste-seccion-titulo">â° Horarios y Ciclos</div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">ğŸŒ™ Hora INICIO nocturnas</label>
      <select class="ajuste-select" id="horaInicioNocturnas" onchange="guardarConfigHorarios()">
        <option value="20">20:00</option>
        <option value="21">21:00</option>
        <option value="22" selected>22:00 (Por defecto)</option>
        <option value="23">23:00</option>
      </select>
    </div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">ğŸŒ… Hora FIN nocturnas</label>
      <select class="ajuste-select" id="horaFinNocturnas" onchange="guardarConfigHorarios()">
        <option value="5">05:00</option>
        <option value="6" selected>06:00 (Por defecto)</option>
        <option value="7">07:00</option>
        <option value="8">08:00</option>
      </select>
    </div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">ğŸ“… DÃ­a inicio de ciclo laboral</label>
      <select class="ajuste-select" id="diaInicioCiclo" onchange="guardarConfigHorarios()">
        <option value="1">DÃ­a 1</option>
        <option value="15">DÃ­a 15</option>
        <option value="20">DÃ­a 20</option>
        <option value="25">DÃ­a 25</option>
        <option value="26" selected>DÃ­a 26 (Por defecto)</option>
        <option value="27">DÃ­a 27</option>
        <option value="28">DÃ­a 28</option>
      </select>
    </div>
    
    <p style="color: #888; font-size: 0.8em; margin-top: 15px; font-style: italic;">
      ğŸ’¡ El ciclo laboral va desde el dÃ­a seleccionado del mes anterior hasta el dÃ­a anterior del mes actual.
    </p>
  </div>
  
  <!-- Importar/Exportar Datos -->
  <div class="ajuste-seccion">
    <div class="ajuste-seccion-titulo">ğŸ“¦ Importar / Exportar Datos</div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">ğŸ“¥ Importar datos desde archivo</label>
      <input type="file" id="archivoImportar" accept=".json" style="display: none;" onchange="importarDatos(event)">
      <button class="btn-ajuste" onclick="document.getElementById('archivoImportar').click()" style="background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); border: 2px solid #BA68C8;">
        ğŸ“¥ Seleccionar Archivo JSON
      </button>
      <p style="color: #888; font-size: 0.8em; margin-top: 8px; font-style: italic;">
        âš ï¸ Esto reemplazarÃ¡ todos los datos actuales
      </p>
    </div>
    
    <div class="separador" style="margin: 20px 0; opacity: 0.3;"></div>
    
    <div class="ajuste-item">
      <label class="ajuste-label">Seleccionar mes a exportar</label>
      <input type="month" class="ajuste-input" id="mesExportar">
    </div>
    
    <button class="btn-ajuste exportar" onclick="exportarDatos('mes')">ğŸ“… Exportar Mes JSON</button>
    <button class="btn-ajuste exportar" onclick="exportarDatos('todo')" style="margin-top: 8px;">ğŸ“¦ Exportar TODO JSON</button>
    <button class="btn-ajuste exportar" onclick="exportarPDF('mes')" style="margin-top: 8px; background: linear-gradient(135deg, #E91E63 0%, #C2185B 100%); border: 2px solid #F06292;">ğŸ“„ Exportar Mes PDF</button>
    <button class="btn-ajuste exportar" onclick="exportarPDF('todo')" style="margin-top: 8px; background: linear-gradient(135deg, #E91E63 0%, #C2185B 100%); border: 2px solid #F06292;">ğŸ“„ Exportar TODO PDF</button>
  </div>
  
  <!-- Notificaciones y Alertas -->
  <div class="ajuste-seccion">
    <div class="ajuste-seccion-titulo">ğŸ”” Notificaciones y Alertas</div>
    
    <div class="ajuste-toggle-container">
      <span class="ajuste-toggle-label">ğŸ“³ Vibrar al fichar</span>
      <div class="toggle-switch activo" id="toggleVibrar" onclick="toggleVibrar()">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
    <div class="ajuste-toggle-container">
      <span class="ajuste-toggle-label">ğŸ”Š Sonido al fichar</span>
      <div class="toggle-switch" id="toggleSonido" onclick="toggleSonido()">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
    <div class="separador" style="margin: 15px 0; opacity: 0.3;"></div>
    
    <div class="ajuste-toggle-container">
      <span class="ajuste-toggle-label">âš ï¸ Aviso lÃ­mite horas diarias</span>
      <div class="toggle-switch" id="toggleLimiteHoras" onclick="toggleLimiteHoras()">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
    <div class="ajuste-item" id="configLimiteHoras" style="display: none; margin-top: 10px;">
      <label class="ajuste-label">Avisar al superar:</label>
      <select class="ajuste-select" id="limiteHorasDiarias" onchange="guardarLimiteHoras()">
        <option value="8">8 horas</option>
        <option value="9">9 horas</option>
        <option value="10" selected>10 horas</option>
        <option value="11">11 horas</option>
        <option value="12">12 horas</option>
        <option value="13">13 horas</option>
        <option value="14">14 horas</option>
      </select>
    </div>
    
    <div class="separador" style="margin: 15px 0; opacity: 0.3;"></div>
    
    <div class="ajuste-toggle-container">
      <span class="ajuste-toggle-label">â° Recordatorio de fichaje</span>
      <div class="toggle-switch" id="toggleRecordatorio" onclick="toggleRecordatorio()">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
    <div class="ajuste-item" id="configRecordatorio" style="display: none; margin-top: 10px;">
      <label class="ajuste-label">Recordar si no ficho despuÃ©s de:</label>
      <select class="ajuste-select" id="tiempoRecordatorio" onchange="guardarRecordatorio()">
        <option value="30">30 minutos</option>
        <option value="60" selected>1 hora</option>
        <option value="120">2 horas</option>
        <option value="180">3 horas</option>
      </select>
      <p style="color: #888; font-size: 0.8em; margin-top: 8px; font-style: italic;">
        ğŸ’¡ RecibirÃ¡s un aviso si llevas mucho tiempo sin registrar actividad
      </p>
    </div>
  </div>
  
  <!-- Borrar Datos -->
  <div class="ajuste-seccion">
    <div class="ajuste-seccion-titulo">ğŸ—‘ï¸ Borrar Datos</div>
    
    <p style="color: #e0e0e0; margin-bottom: 15px; font-size: 0.9em;">
      âš ï¸ Esta acciÃ³n es irreversible. Se eliminarÃ¡n todos los registros guardados.
    </p>
    
    <button class="btn-ajuste peligro" onclick="borrarTodosDatos()">ğŸ—‘ï¸ Borrar TODOS los Datos</button>
    <button class="btn-ajuste peligro" onclick="limpiarCache()" style="margin-top: 8px;">ğŸ§¹ Limpiar CachÃ© de la App</button>
  </div>
  
  <!-- Info de la App -->
  <div class="ajuste-seccion">
    <div class="ajuste-seccion-titulo">â„¹ï¸ InformaciÃ³n</div>
    
    <div class="info-version" id="infoVersion">
      <div id="textoNormal" class="texto-transicion">
        <strong>Regyster</strong><br>
        VersiÃ³n 2.0<br><br>
        AplicaciÃ³n profesional para el control<br>
        de jornadas laborales<br><br>
        <span style="font-size: 0.8em; opacity: 0.7;">
          Registro de trabajo y descanso<br>
          Funciona 100% offline â€¢ PWA
        </span>
      </div>
      <div id="textoSecreto" class="texto-transicion" style="display: none;">
        <span class="easter-msg">Desarrollado con â¤ï¸ y mucho â˜•</span><br>
        <span class="easter-msg">Para Mi Rey ğŸ‘‘</span>
      </div>
    </div>
  </div>

</div>
</div>
<!-- FIN PÃGINA 4 -->

<!-- MODAL PARA VER DETALLE DIARIO -->
<div class="modal-overlay" id="modalDetalleDiario">
  <div class="modal-content">
    <button class="modal-close-detalle" id="cerrarDetalleDiario">âœ•</button>
    <div class="detalle-header" style="justify-content: center;">
      <span class="detalle-fecha" id="detalleFechaDiario">ğŸ“… DD/MM/YYYY</span>
    </div>
    <div id="detalleContenidoDiario"></div>
  </div>
</div>

<!-- MODAL PARA BORRAR REGISTROS -->
<div class="modal-overlay" id="modalBorrar">
  <div class="modal-content">
    <button class="modal-close" id="cerrarModal">âœ•</button>
    <div class="modal-header">
      <h3 class="modal-title">ğŸ—‘ï¸ Ãšltimos 10 Registros</h3>
    </div>
    <div id="listaRegistros"></div>
  </div>
</div>

<!-- MODAL PARA DETALLE DE REGISTRO -->
<div class="modal-overlay" id="modalDetalle">
  <div class="modal-content">
    <button class="modal-close-detalle" id="cerrarDetalle">âœ•</button>
    <div class="detalle-header">
      <div class="detalle-checkbox-container">
        <input type="checkbox" class="detalle-checkbox" id="detalleCheckbox" />
        <span class="detalle-fecha" id="detalleFecha">ğŸ“… DD/MM/YYYY</span>
      </div>
      <div class="detalle-acciones">
        <button class="btn-borrar-detalle" id="btnBorrarDetalle">ğŸ—‘ï¸</button>
      </div>
    </div>
    <div id="detalleContenido"></div>
  </div>
</div>

<!-- MODAL PARA DETALLE DEL CALENDARIO 26â†’25 -->
<div class="modal-overlay" id="modalDetalleCalendario">
  <div class="modal-content">
    <button class="modal-close-detalle" id="cerrarDetalleCalendario">âœ•</button>
    <div class="detalle-header" style="justify-content: center;">
      <span class="detalle-fecha" id="detalleFechaCalendario">ğŸ“… DD/MM/YYYY</span>
    </div>
    <div id="detalleContenidoCalendario"></div>
  </div>
</div>

<!-- BARRA DE NAVEGACIÃ“N -->
<nav class="nav-bar">
  <button class="nav-btn active" data-pagina="paginaInicio" onclick="cambiarPagina('paginaInicio')">
    ğŸ 
    <span>Inicio</span>
  </button>
  <button class="nav-btn" data-pagina="paginaGraficas" onclick="cambiarPagina('paginaGraficas')">
    ğŸ“ˆ
    <span>GrÃ¡ficas</span>
  </button>
  <button class="nav-btn" data-pagina="paginaProximamente" onclick="cambiarPagina('paginaProximamente')">
    ğŸ”®
    <span>PrÃ³ximo</span>
  </button>
  <button class="nav-btn" data-pagina="paginaAjustes" onclick="cambiarPagina('paginaAjustes')">
    âš™ï¸
    <span>Ajustes</span>
  </button>
</nav>

<!-- STICKMAN ESPÃA - EASTER EGG -->
<div class="stickman-container" id="stickmanContainer">
  <div class="stickman">
    <div class="stickman-head">
      <div class="stickman-eye left"></div>
      <div class="stickman-eye right"></div>
    </div>
    <div class="stickman-shoulders"></div>
    <div class="stickman-body"></div>
    <div class="stickman-arm visible-arm"></div>
    <div class="stickman-hand"></div>
  </div>
</div>

<!-- Chart.js para grÃ¡ficas -->

<!-- Chart.js para grÃ¡ficas -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- html2pdf.js para exportaciÃ³n a PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<!-- Scripts modulares -->
<script src="js/app.js"></script>
<script src="js/core.js"></script>
<script src="js/navegacion.js"></script>
<script src="js/stickman.js"></script>

</body>
</html>
